<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
<title>è¦ºå¯Ÿä¹‹é¡</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{
  font-family:-apple-system,BlinkMacSystemFont,'Segoe UI','Microsoft JhengHei',sans-serif;
  background:linear-gradient(135deg,#f0f4ff 0%,#e8f0fe 100%);
  width: 100%;
  height: 100vh;
  margin: 0;
  padding: 0;
  color:#333;
  overflow: hidden;
  -webkit-font-smoothing: antialiased;
}
.container{
  width: 100%;
  height: 100vh;
  background:rgba(255,255,255,.98);
  padding: 0;
  display: flex;
  flex-direction: column;
  box-shadow: 0 0 20px rgba(0,0,0,0.05);
}
.header{
  padding: 24px 20px 16px;
  text-align: center;
  border-bottom: 1px solid #f0f4ff;
}
h1{
  font-size: 26px;
  margin-bottom: 8px;
  background:linear-gradient(135deg,#5b7bdf 0%,#805ad5 100%);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  background-clip:text;
  letter-spacing: 0.5px;
}
.subtitle{
  color:#6b7280;
  font-size: 13px;
  line-height: 1.4;
}

.tabs{
  display: flex;
  padding: 0 20px;
  border-bottom: 1px solid #f0f4ff;
}
.tab{
  flex: 1;
  text-align: center;
  padding: 14px 0;
  cursor: pointer;
  border: none;
  background: none;
  font-size: 15px;
  color: #9ca3af;
  transition: all .2s ease;
  position: relative;
}
.tab.active{
  color: #5b7bdf;
  font-weight: 600;
}
.tab.active::after{
  content: '';
  position: absolute;
  bottom: -1px;
  left: 15%;
  width: 70%;
  height: 2px;
  background:linear-gradient(90deg,#5b7bdf 0%,#805ad5 100%);
  border-radius: 2px;
}

.tab-content{
  display: none;
  flex: 1;
  overflow-y: auto;
  padding: 20px;
}
.tab-content.active{
  display: block;
}
.tab-content::-webkit-scrollbar{
  width: 4px;
}
.tab-content::-webkit-scrollbar-thumb{
  background: #e2e8f0;
  border-radius: 2px;
}

.list-container{
  padding: 0;
}
.item{
  display: flex;
  align-items: center;
  padding: 16px;
  margin-bottom: 12px;
  border-radius: 16px;
  background:linear-gradient(135deg,#f8fafc 0%,#f1f5f9 100%);
  border-left: 4px solid #5b7bdf;
  box-shadow: 0 4px 12px rgba(91,123,223,0.06);
  cursor: pointer;
  transition: all .15s ease;
}
.item:hover{
  transform: translateY(-1px);
  box-shadow: 0 6px 16px rgba(91,123,223,0.08);
}
.item:active{
  transform: scale(0.99);
  box-shadow: 0 2px 8px rgba(91,123,223,0.06);
}
.badge{
  width: 40px;
  height: 40px;
  border-radius: 10px;
  background:linear-gradient(135deg,#e0e7ff 0%,#ddd6fe 100%);
  color: #5b7bdf;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 18px;
  font-weight: 700;
  margin-right: 14px;
  box-shadow: inset 0 1px 2px rgba(255,255,255,0.5);
}
.meta{
  flex: 1;
}
.name{
  font-size: 16px;
  font-weight: 600;
  color: #1f2937;
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 4px;
}
.desc{
  font-size: 12px;
  color: #6b7280;
  line-height: 1.4;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  opacity: 0.9;
}

.actions{
  display: flex;
  gap: 12px;
  padding: 16px 20px;
  border-top: 1px solid #f0f4ff;
}
.btn-danger{
  flex: 1;
  padding: 14px;
  border: none;
  background:linear-gradient(135deg,#f472b6 0%,#ec4899 100%);
  color: #fff;
  border-radius: 12px;
  font-size: 15px;
  font-weight: 600;
  cursor: pointer;
  transition: all .15s ease;
  box-shadow: 0 4px 12px rgba(236,72,153,0.15);
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
}
.btn-danger:hover{
  box-shadow: 0 6px 16px rgba(236,72,153,0.2);
}
.btn-danger:active{
  transform: scale(0.98);
  box-shadow: 0 2px 8px rgba(236,72,153,0.12);
}

.notice{
  position: fixed;
  top: 24px;
  left: 50%;
  transform: translateX(-50%) translateY(-20px);
  padding: 12px 20px;
  background:linear-gradient(135deg,#10b981 0%,#059669 100%);
  color: #fff;
  border-radius: 12px;
  box-shadow: 0 6px 16px rgba(16,185,129,0.2);
  z-index: 1000;
  opacity: 0;
  transition: all .3s cubic-bezier(0.4,0,0.2,1);
  font-size: 14px;
  font-weight: 500;
}
.notice.show{
  opacity: 1;
  transform: translateX(-50%) translateY(0);
}
.notice.error{
  background:linear-gradient(135deg,#ef4444 0%,#dc2626 100%);
  box-shadow: 0 6px 16px rgba(239,68,68,0.2);
}

.btn-text{
  padding: 12px 20px;
  border-radius: 10px;
  border: none;
  color: #fff;
  cursor: pointer;
  background:linear-gradient(135deg,#5b7bdf 0%,#805ad5 100%);
  font-size: 14px;
  font-weight: 600;
  box-shadow: 0 4px 12px rgba(91,123,223,0.15);
  transition: all .15s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
}
.btn-text:hover{
  box-shadow: 0 6px 16px rgba(91,123,223,0.2);
}
.btn-text:active{
  transform: scale(0.96);
  box-shadow: 0 2px 8px rgba(91,123,223,0.12);
}

.statistics-header{
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0 0 16px;
  margin-bottom: 8px;
  gap: 12px;
}
.total-count{
  padding: 12px 18px;
  background:linear-gradient(135deg,#5b7bdf 0%,#805ad5 100%);
  color: #fff;
  border-radius: 10px;
  font-size: 14px;
  font-weight: 600;
  box-shadow: 0 4px 12px rgba(91,123,223,0.15);
  white-space: nowrap;
}

.report-table{
  width: 100%;
  border-collapse: collapse;
  background: #fff;
  border-radius: 12px;
  overflow: hidden;
  box-shadow: 0 4px 16px rgba(0,0,0,0.04);
}
.report-table th, .report-table td{
  padding: 14px 16px;
  text-align: left;
  border-bottom: 1px solid #f0f4ff;
}
.report-table th{
  background:linear-gradient(135deg,#f8fafc 0%,#f1f5f9 100%);
  color: #4b5563;
  font-size: 13px;
  font-weight: 600;
  text-transform: capitalize;
  letter-spacing: 0.3px;
}
.report-table td{
  color: #1f2937;
  font-size: 14px;
}
.report-table tr:last-child td{
  border-bottom: none;
}
.report-table tr:hover td{
  background-color: #f9fafb;
}
.report-table td:first-child{
  display: flex;
  align-items: center;
  gap: 8px;
}
.report-table td:last-child{
  color: #5b7bdf;
  font-weight: 600;
}
</style>

<!-- å¼•å…¥manifest.json -->
<link rel="manifest" href="/314green/manifest.json">

<!-- é€‚é…iOSè®¾å¤‡ -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-title" content="è¦ºå¯Ÿä¹‹é¡">
<link rel="apple-touch-icon" href="/314green/icon.png">
<meta name="apple-mobile-web-app-status-bar-style" content="default">

<!-- æ³¨å†ŒService Worker -->
<script>
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', function() {
      navigator.serviceWorker.register('/314green/sw.js').catch(err => {
        console.log('Service Worker æ³¨å†Œå¤±è´¥:', err);
      });
    });
  }
</script>
</head>
<body>
<div id="notice" class="notice"></div>

<div class="container">
  <div class="header">
    <h1>ğŸ§˜ è¦ºå¯Ÿä¹‹é¡</h1>
    <div class="subtitle">è¿½è¹¤æ¯ä¸€å€‹è¦ºå¯Ÿæ™‚åˆ»ï¼Œè¦ºå¯Ÿå³è‡ªç”±</div>
  </div>

  <div class="tabs">
    <button class="tab active" onclick="switchTab(0)">ğŸ“Œ è¨ˆæ•¸å™¨</button>
    <button class="tab" onclick="switchTab(1)">ğŸ“Š çµ±è¨ˆ</button>
  </div>

  <div id="tab0" class="tab-content active">
    <div class="list-container" id="itemsList"></div>
    <div class="actions">
      <button class="btn-danger" onclick="clearAll()">ğŸ—‘ æ¸…ç©ºå…¨éƒ¨</button>
    </div>
  </div>

  <div id="tab1" class="tab-content">
    <div class="statistics-header">
      <button class="btn-text" onclick="exportData()">ğŸ“¥ å°å‡ºæ•¸æ“š</button>
      <div id="totalCount" class="total-count">ç¸½è§¸ç™¼æ¬¡æ•¸ï¼š0</div>
    </div>
    <div id="reportContainer"></div>
  </div>
</div>

<script>
/* è§€å¯Ÿé …ç›® */
const ITEMS = [
  { id:1, name:'é€ƒé¿', emoji:'ğŸš¶', desc:'ä¸çŸ¥é“è¦åšä»€éº¼å°±æ•´ç†ç’°å¢ƒ' },
  { id:2, name:'æ¸…æ˜', emoji:'ğŸšª', desc:'ä¸è§£é‡‹ï¼Œä¸èªªæ˜ï¼Œä¸éœ€è¦æˆ‘è™•ç†ï¼Œå°±æ”¾æ‰' },
  { id:3, name:'å°ˆæ³¨', emoji:'ğŸ§Š', desc:'åŸ·è¡ŒåŠ›=ä¸è¦çµ¦å¤§è…¦ç•™æ™‚é–“ï¼Œç”¨è‚‰é«”æ§åˆ¶ç²¾ç¥ï¼Œç›´æ¥é–‹å¹¹' },
  { id:4, name:'ç«™ç©©', emoji:'ğŸ”„', desc:'è‡ªå·±æœƒæ•™äººçš„å£ç¿’æ…£' },
  { id:5, name:'å¤±ç„¦', emoji:'ğŸ‘€', desc:'ä½ åˆ°åº•çŸ¥ä¸çŸ¥é“æ­¤åˆ»ä½ è©²å¹¹å˜›ï¼Ÿ' },
  { id:6, name:'åŠ‡æœ¬', emoji:'ğŸ¬', desc:'è¢«è‡ªå·±çš„è…¦ä¸­åŠ‡æœ¬ç‰½è‘—èµ°' },
  { id:7, name:'é—œå¡', emoji:'âš”ï¸', desc:'å®‡å®™é™°è¬€ï¼Œç”¨é­šï¼Œç”¨å½±ï¼Œç”¨æ…¢ï¼Œé˜»æ­¢ä½ å‰è¡Œ' },
  { id:8, name:'å±¤æ¬¡', emoji:'ğŸ“Š', desc:'å¤§çœ¾æ€ç¶­ï¼Œé«˜æ‰‹æ€ç¶­ï¼Œåšä»€éº¼ï¼Œæ€éº½åšï¼Œç‚ºä»€éº¼' },
  { id:9, name:'æµå‹•', emoji:'ğŸ‘»', desc:'æŠŠäººç”Ÿç•¶éŠæˆ²ä¾†ç©ï¼Œç·´ç­‰' },
  { id:10, name:'ç©ºè½‰', emoji:'â³', desc:'è™›åº¦' },
  { id:11, name:'é¦´åŒ–', emoji:'ğŸ´', desc:'æ³¨æ„åŠ›=è¢«é¦´åŒ–' },
  { id:12, name:'æ‹–å»¶', emoji:'â¸', desc:'æ˜å¤©å†åŸ·è¡Œçš„é™·é˜±' }
];

/* ä½¿ç”¨ localStorage å„²å­˜è³‡æ–™ */
let appData = null;

const $ = s => document.querySelector(s);
function todayStr(){ return new Date().toISOString().split('T')[0]; }
function showNotice(t, isError=false){
  const n=$("#notice");
  n.textContent=t;
  n.classList.toggle('error', isError);
  n.classList.add('show');
  setTimeout(()=>n.classList.remove('show'),2000);
}

/* åˆå§‹åŒ–è³‡æ–™ï¼Œå¦‚æœ localStorage æœ‰å‰‡ä½¿ç”¨ */
function initData(){
  const raw = localStorage.getItem('appData');
  if(raw){
    try{
      appData = JSON.parse(raw);
      return appData;
    }catch(e){
      // è§£æå¤±æ•—å‰‡ä½¿ç”¨é è¨­å€¼
    }
  }
  appData = {
    items: ITEMS.map(x=>({ 
      id:x.id, 
      name:x.name, 
      emoji:x.emoji, 
      desc:x.desc, 
      count:0, 
      lastUpdate:null 
    })),
    lastReset: todayStr()
  };
  localStorage.setItem('appData', JSON.stringify(appData));
  return appData;
}

/* å–å¾—è³‡æ–™ */
function getData(){ 
  return appData || initData();
}

/* è¨­å®šä¸¦å­˜å…¥ localStorage */
function setData(d){ 
  appData = d;
  localStorage.setItem('appData', JSON.stringify(d));
}

/* æ¸²æŸ“åˆ—è¡¨ */
function render(){
  const d=getData(); 
  const wrap=$("#itemsList");
  wrap.innerHTML = d.items.map(it=>`
    <div class="item" onclick="addCount(${it.id})">
      <div class="badge">${it.count}</div>
      <div class="meta">
        <div class="name">${it.emoji} ${it.name}</div>
        <div class="desc">${it.desc}</div>
      </div>
    </div>
  `).join('');
  
  // æ›´æ–°ç¬¬äºŒé çš„ç¸½æ¬¡æ•¸
  const total = d.items.reduce((s, i) => s + i.count, 0);
  $("#totalCount").textContent = `ç¸½è§¸ç™¼æ¬¡æ•¸ï¼š${total}`;
}

/* å¢åŠ è¨ˆæ•¸ */
function addCount(id){
  const d=getData(); 
  const it=d.items.find(i=>i.id===id); 
  if(!it) return;
  it.count++; 
  it.lastUpdate=new Date().toISOString(); 
  setData(d); 
  render(); 
  showNotice(`âœ¨ ${it.name} +1`);
}

/* ç”Ÿæˆå ±è¡¨ */
function generateReport(){
  const d=getData(); 
  const sorted=[...d.items].sort((a,b)=>b.count-a.count);
  let html='<table class="report-table"><thead><tr><th>è¦ºå¯Ÿè©å½™</th><th>æ¬¡æ•¸</th></tr></thead><tbody>';
  sorted.forEach(i=> html+=`<tr><td>${i.emoji} ${i.name}</td><td>${i.count}</td></tr>`);
  html+='</tbody></table>';
  $("#reportContainer").innerHTML=html;
  showNotice('ğŸ“Š çµ±è¨ˆå·²ç”Ÿæˆ');
}

/* å°å‡ºæ•¸æ“š */
function exportData(){
  const d=getData(); 
  const lines=d.items.map(i=>`${i.name}: ${i.count}æ¬¡`).join('\n');
  const text=`è¦ºå¯Ÿè©å½™è¨ˆæ•¸\næ—¥æœŸ: ${new Date().toLocaleString()}\n\n${lines}\n\nç¸½æ¬¡æ•¸: ${d.items.reduce((s,i)=>s+i.count,0)}`;
  navigator.clipboard.writeText(text).then(()=>showNotice('âœ… å·²è¤‡è£½åˆ°å‰ªè²¼ç°¿')).catch(()=>showNotice('âŒ è¤‡è£½å¤±æ•—', true));
}

/* æ¸…ç©ºå…¨éƒ¨ */
function clearAll(){
  if(!confirm('âš ï¸ ç¢ºå®šè¦æ¸…ç©ºå…¨éƒ¨è³‡æ–™å—ï¼Ÿæ­¤æ“ä½œç„¡æ³•æ’¤éŠ·ï¼')) return;
  try{
    appData = {
      items: ITEMS.map(x=>({ 
        id:x.id, 
        name:x.name, 
        emoji:x.emoji, 
        desc:x.desc, 
        count:0, 
        lastUpdate:null 
      })),
      lastReset: todayStr()
    };
    setData(appData);
    render();
    $("#reportContainer").innerHTML='';
    showNotice('âœ… å…¨éƒ¨ç´€éŒ„å·²æ¸…ç©º');
  }catch(e){
    showNotice('âŒ æ¸…é™¤å¤±æ•—ï¼Œè«‹å†è©¦ä¸€æ¬¡', true);
  }
}

/* åˆ‡æ›åˆ†é  */
function switchTab(i){
  document.querySelectorAll('.tab').forEach((t,idx)=>t.classList.toggle('active',idx===i));
  document.querySelectorAll('.tab-content').forEach((c,idx)=>c.classList.toggle('active',idx===i));
  if(i===1) generateReport();
}

/* åˆå§‹åŒ–æ‡‰ç”¨ */
initData(); 
render();
</script>
</body>
</html>

manifest.json
{
  "name": "è¦ºå¯Ÿä¹‹é¡",
  "short_name": "è¦ºå¯Ÿé¡",
  "start_url": "/314green/",
  "display": "standalone",
  "theme_color": "#667eea",
  "background_color": "#f5f7fa",
  "icons": [
    {
      "src": "icon.png",
      "sizes": "192x192",
      "type": "image/png"
    }
  ]
}


sw.js
const cacheName = 'my-pwa-cache';
const filesToCache = [
  '/314green/',
  '/314green/index.html',
  '/314green/manifest.json',
  '/314green/icon.png'
];

self.addEventListener('install', function(e) {
  e.waitUntil(
    caches.open(cacheName).then(function(cache) {
      return cache.addAll(filesToCache);
    })
  );
});

self.addEventListener('fetch', function(e) {
  e.respondWith(
    caches.match(e.request).then(function(response) {
      return response || fetch(e.request);
    })
  );
});
