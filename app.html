<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>å·¥å…·ä»£ç¢¼ç”Ÿæˆå™¨</title>
<style>
* { box-sizing: border-box; margin: 0; padding: 0; }
body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: #1a1a1a; color: #fff; padding: 20px; min-height: 100vh; }
.container { max-width: 500px; margin: 0 auto; }
h1 { margin-bottom: 25px; text-align: center; font-size: 20px; color: #82B1FF; }
.form-section { background: #242424; border-radius: 12px; padding: 20px; margin-bottom: 20px; }
.form-group { margin-bottom: 15px; }
label { display: block; font-size: 13px; margin-bottom: 6px; color: #b0b0b0; font-weight: 500; }
.input-with-btn { display: flex; gap: 8px; }
.input-with-btn input { flex: 1; }
.input-with-btn button { flex: 0 0 auto; padding: 10px 12px; }
input, textarea { width: 100%; padding: 10px; background: #2a2a2a; border: 1px solid #3a3a3a; border-radius: 6px; color: #fff; font-family: inherit; font-size: 13px; }
input::placeholder, textarea::placeholder { color: #666; }
textarea { min-height: 50px; resize: vertical; }
.color-grid { display: grid; grid-template-columns: repeat(6, 1fr); gap: 8px; margin-top: 8px; }
.color-box { width: 100%; aspect-ratio: 1; border-radius: 8px; cursor: pointer; border: 3px solid transparent; transition: all 0.2s; }
.color-box:hover { transform: scale(1.05); }
.color-box.selected { border-color: #fff; box-shadow: 0 0 10px rgba(255,255,255,0.6); }
.color-input-group { display: flex; gap: 8px; margin-top: 8px; }
.color-code-input { flex: 1; padding: 10px; background: #2a2a2a; border: 1px solid #3a3a3a; border-radius: 6px; color: #fff; font-family: 'Monaco', monospace; font-size: 12px; font-weight: 600; }
.color-preview { width: 40px; height: 40px; border-radius: 6px; border: 2px solid #3a3a3a; flex-shrink: 0; }
.btn-small { padding: 8px 12px; background: #404040; color: #fff; border: none; border-radius: 6px; cursor: pointer; font-size: 12px; font-weight: 600; transition: all 0.2s; }
.btn-small:hover { background: #505050; }
.buttons { display: flex; gap: 10px; margin-top: 20px; }
button { flex: 1; padding: 11px; border: none; border-radius: 8px; font-size: 13px; cursor: pointer; transition: all 0.2s; font-weight: 600; }
.btn-generate { background: #82B1FF; color: #000; }
.btn-generate:hover { background: #a8cbff; }
.btn-copy { background: #69F0AE; color: #000; }
.btn-copy:hover { background: #8effc4; }
.btn-clear { background: #ff6b6b; color: #fff; }
.btn-clear:hover { background: #ff8080; }
.preview-section { background: #2f2f2f; border-radius: 10px; padding: 15px; margin-bottom: 20px; display: none; }
.preview-section.show { display: block; }
.preview-card { background: #242424; border-radius: 8px; padding: 12px; display: flex; align-items: center; gap: 10px; border: 1px solid #3a3a3a; }
.preview-icon { width: 48px; height: 48px; border-radius: 6px; display: flex; align-items: center; justify-content: center; font-size: 22px; flex-shrink: 0; }
.preview-text h4 { font-size: 13px; margin-bottom: 2px; font-weight: 600; color: #fff; }
.preview-text p { font-size: 11px; color: #808080; }
.code-section { background: #2f2f2f; border-radius: 10px; padding: 15px; margin-bottom: 20px; display: none; }
.code-section.show { display: block; }
.code-title { font-size: 12px; color: #b0b0b0; margin-bottom: 10px; text-transform: uppercase; font-weight: 600; }
.code-block { background: #1a1a1a; border: 1px solid #3a3a3a; border-radius: 6px; padding: 12px; overflow-x: auto; font-family: 'Monaco', 'Courier New', monospace; font-size: 11px; line-height: 1.5; color: #82B1FF; margin-bottom: 10px; max-height: 150px; overflow-y: auto; }
.instructions { background: #1a3a2a; border-left: 3px solid #69F0AE; padding: 12px; border-radius: 6px; font-size: 12px; line-height: 1.6; color: #b0b0b0; }
.instructions strong { color: #69F0AE; }
.copy-feedback { position: fixed; bottom: 20px; right: 20px; background: #69F0AE; color: #000; padding: 10px 16px; border-radius: 6px; opacity: 0; transition: opacity 0.3s; pointer-events: none; font-size: 12px; font-weight: 600; }
.copy-feedback.show { opacity: 1; pointer-events: auto; }

/* åº•éƒ¨æŠ½å±œ */
.bottom-sheet-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); z-index: 999; opacity: 0; transition: opacity 0.3s; pointer-events: none; }
.bottom-sheet-overlay.active { opacity: 1; pointer-events: auto; }
.bottom-sheet { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: #1a1a1a; z-index: 1000; width: 100%; height: 100%; display: flex; flex-direction: column; transform: translateY(100%); transition: transform 0.3s cubic-bezier(0.4,0,0.2,1); overflow: hidden; }
.bottom-sheet.active { transform: translateY(0); }
.bottom-sheet-header { display: flex; justify-content: space-between; align-items: center; padding: 15px 20px; border-bottom: 1px solid #3a3a3a; flex-shrink: 0; background: #242424; }
.bottom-sheet-title { font-size: 16px; font-weight: 600; color: #fff; }
.bottom-sheet-close { font-size: 24px; cursor: pointer; color: #808080; }
.bottom-sheet-content { flex: 1; overflow-y: auto; padding: 20px; }

/* åœ–ç¤ºåº« - ç¸±å‘åˆ—è¡¨å¼ */
.emoji-grid { display: flex; flex-direction: column; gap: 12px; }
.emoji-row { display: flex; gap: 8px; align-items: center; }
.emoji-item { display: flex; align-items: center; justify-content: center; background: #242424; border-radius: 10px; padding: 0; font-size: 32px; cursor: pointer; border: 2px solid transparent; transition: all 0.2s; width: 60px; height: 60px; flex-shrink: 0; }
.emoji-item:hover { background: #2f2f2f; transform: scale(1.15); border-color: #82B1FF; }

/* é¡è‰²æ­·å² - ç¸±å‘åˆ—è¡¨å¼ */
.color-history-grid { display: flex; flex-direction: column; gap: 10px; }
.color-history-row { display: flex; gap: 10px; align-items: center; }
.color-history-item { display: flex; align-items: center; gap: 12px; background: #242424; padding: 12px; border-radius: 8px; cursor: pointer; border: 2px solid transparent; transition: all 0.2s; width: 100px; flex-shrink: 0; }
.color-history-item:hover { background: #2f2f2f; border-color: #82B1FF; transform: scale(1.05); }
.color-history-box { width: 50px; height: 50px; border-radius: 6px; border: 1px solid #3a3a3a; flex-shrink: 0; }
.color-history-code { font-family: 'Monaco', monospace; font-size: 10px; color: #82B1FF; font-weight: 600; text-align: center; }

.btn-clear-all { width: 100%; padding: 12px; margin-top: 15px; background: #ff6b6b; color: #fff; border: none; border-radius: 8px; cursor: pointer; font-weight: 600; }

::-webkit-scrollbar { width: 6px; }
::-webkit-scrollbar-track { background: #2a2a2a; }
::-webkit-scrollbar-thumb { background: #404040; border-radius: 3px; }
</style>
</head>
<body>
<div class="container">
  <h1>ğŸ› ï¸ å·¥å…·ä»£ç¢¼ç”Ÿæˆå™¨</h1>
  <div class="form-section">
    <div class="form-group">
      <label>å·¥å…·åç¨±</label>
      <input type="text" id="toolName" placeholder="ä¾‹å¦‚ï¼šæ™‚é–“è¿½è¹¤å™¨">
    </div>
    <div class="form-group">
      <label>æè¿°</label>
      <textarea id="toolDesc" placeholder="ç°¡çŸ­æè¿°å·¥å…·åŠŸèƒ½"></textarea>
    </div>
    <div class="form-group">
      <label>é€£çµ</label>
      <div class="input-with-btn">
        <input type="text" id="toolUrl" placeholder="https://example.com">
        <button class="btn-small" onclick="pasteUrl()">è²¼ä¸Š</button>
        <button class="btn-small" onclick="clearUrl()" style="background: #ff6b6b;">æ¸…é™¤</button>
      </div>
    </div>
    <div class="form-group">
      <label>åœ–ç¤º</label>
      <div class="input-with-btn">
        <input type="text" id="toolIcon" placeholder="ä¾‹å¦‚ï¼šâ°" maxlength="2">
        <button class="btn-small" onclick="openEmojiPicker()">åƒè€ƒ</button>
      </div>
    </div>
    <div class="form-group">
      <label>é¡è‰²</label>
      <div class="color-grid" id="colorGrid"></div>
      <div class="color-input-group">
        <input type="text" id="colorCode" class="color-code-input" placeholder="#FF8A80" maxlength="7">
        <div class="color-preview" id="colorPreview" style="background: #FF8A80;"></div>
        <button class="btn-small" onclick="openColorHistory()">æ­·å²</button>
      </div>
    </div>
    <div class="buttons">
      <button class="btn-generate" onclick="generateCode()">ç”Ÿæˆä»£ç¢¼</button>
      <button class="btn-clear" onclick="clearForm()">æ¸…ç©º</button>
    </div>
  </div>
  <!-- é è¦½å€ -->
  <div class="preview-section" id="previewSection">
    <div class="preview-card" id="previewCard"></div>
  </div>
  <!-- ç”Ÿæˆçš„ä»£ç¢¼å€ -->
  <div class="code-section" id="codeSection">
    <div class="code-title">ç”Ÿæˆçš„ä»£ç¢¼</div>
    <div class="code-block" id="generatedCode"></div>
    <button class="btn-copy" onclick="copyCode()" style="width: 100%;">ğŸ“‹ è¤‡è£½</button>
  </div>
  <!-- ä½¿ç”¨èªªæ˜ -->
  <div class="instructions">
    <strong>ğŸ“– è²¼å…¥ä½ç½®ï¼š</strong><br>
    æ‰¾åˆ°ä¸» HTML çš„å°æ‡‰åˆ†é¡ï¼Œè²¼åœ¨ <code>items: []</code> è£¡é¢<br><br>
    <strong>æ¸…é™¤å¿«å–ï¼š</strong><br>
    åŸ·è¡Œ <code>localStorage.clear()</code> ç„¶å¾Œé‡æ–°æ•´ç†
  </div>
</div>

<!-- åº•éƒ¨æŠ½å±œ - åœ–ç¤ºé¸æ“‡å™¨ -->
<div class="bottom-sheet-overlay" id="emojiOverlay" onclick="closeEmojiPicker()"></div>
<div class="bottom-sheet" id="emojiSheet">
  <div class="bottom-sheet-header">
    <div class="bottom-sheet-title">é¸æ“‡åœ–ç¤º</div>
    <div class="bottom-sheet-close" onclick="closeEmojiPicker()">âœ•</div>
  </div>
  <div class="bottom-sheet-content" id="emojiGrid"></div>
</div>

<!-- åº•éƒ¨æŠ½å±œ - é¡è‰²æ­·å² -->
<div class="bottom-sheet-overlay" id="historyOverlay" onclick="closeColorHistory()"></div>
<div class="bottom-sheet" id="historySheet">
  <div class="bottom-sheet-header">
    <div class="bottom-sheet-title">é¡è‰²æ­·å²</div>
    <div class="bottom-sheet-close" onclick="closeColorHistory()">âœ•</div>
  </div>
  <div class="bottom-sheet-content">
    <div id="colorHistoryGrid"></div>
    <button class="btn-clear-all" onclick="clearColorHistory()">æ¸…é™¤æ‰€æœ‰æ­·å²</button>
  </div>
</div>

<div class="copy-feedback" id="feedback">âœ“ å·²è¤‡è£½</div>

<script>
const colors = [
  '#FF8A80', '#82B1FF', '#FFD54F', '#69F0AE', '#B388FF', '#64B5F6',
  '#FF87B0', '#54D8FF', '#FFD263', '#B6DC8A', '#B1B7ED', '#FF81B4'
];

const emojis = [
  'ğŸ§˜', 'ğŸ“…', 'â°', 'âœ…', 'ğŸ”§', 'ğŸµ', 'ğŸ“Š', 'ğŸ–‹',
  'ğŸ’¡', 'âš™ï¸', 'ğŸ¯', 'ğŸš€', 'ğŸ“±', 'ğŸ¨', 'ğŸ­', 'ğŸª',
  'ğŸ¬', 'ğŸ®', 'ğŸ•', 'ğŸ”', 'ğŸ£', 'â˜•', 'ğŸ°', 'ğŸ‚',
  'âš½', 'ğŸ€', 'ğŸ¾', 'ğŸ', 'ğŸˆ', 'â›³', 'ğŸŒŸ', 'â­',
  'âœ¨', 'ğŸ’«', 'ğŸŒ ', 'ğŸ”¥', 'â¤ï¸', 'ğŸ’™', 'ğŸ’š', 'ğŸ’›',
  'ğŸ§¡', 'ğŸ’œ', 'ğŸš—', 'ğŸš•', 'ğŸš™', 'âœˆï¸', 'ğŸš', 'ğŸš‚',
  'ğŸ“', 'ğŸ“š', 'âœï¸', 'ğŸ“', 'ğŸ”', 'ğŸ”“', 'ğŸ””', 'ğŸ“¢'
];

let selectedColor = '#FF8A80';
let colorHistory = JSON.parse(localStorage.getItem('colorHistory') || '[]');

function initColorGrid() {
  const grid = document.getElementById('colorGrid');
  colors.forEach(color => {
    const box = document.createElement('div');
    box.className = `color-box ${color === selectedColor ? 'selected' : ''}`;
    box.style.background = color;
    box.onclick = () => selectColor(color);
    grid.appendChild(box);
  });
  updateDisplay();
}

function selectColor(color) {
  selectedColor = color;
  addToColorHistory(color);
  updateDisplay();
  updatePreview();
}

function updateDisplay() {
  document.getElementById('colorCode').value = selectedColor;
  document.getElementById('colorPreview').style.background = selectedColor;
  document.querySelectorAll('.color-box').forEach(el => el.classList.remove('selected'));
  document.querySelectorAll(`.color-box[style*="${selectedColor}"]`).forEach(el => el.classList.add('selected'));
}

function handleColorInput() {
  const input = document.getElementById('colorCode').value.trim();
  if (/^#[0-9A-Fa-f]{6}$/.test(input)) {
    selectedColor = input.toUpperCase();
    addToColorHistory(selectedColor);
    updateDisplay();
    updatePreview();
  }
}

function addToColorHistory(color) {
  if (!colorHistory.includes(color)) {
    colorHistory.unshift(color);
    if (colorHistory.length > 30) colorHistory.pop();
    localStorage.setItem('colorHistory', JSON.stringify(colorHistory));
  }
}

function openEmojiPicker() {
  const grid = document.getElementById('emojiGrid');
  grid.innerHTML = '';
  
  for (let i = 0; i < emojis.length; i += 5) {
    const row = document.createElement('div');
    row.className = 'emoji-row';
    
    for (let j = i; j < Math.min(i + 5, emojis.length); j++) {
      const item = document.createElement('div');
      item.className = 'emoji-item';
      item.textContent = emojis[j];
      item.onclick = () => selectEmoji(emojis[j]);
      row.appendChild(item);
    }
    
    grid.appendChild(row);
  }
  
  document.getElementById('emojiSheet').classList.add('active');
  document.getElementById('emojiOverlay').classList.add('active');
}

function closeEmojiPicker() {
  document.getElementById('emojiSheet').classList.remove('active');
  document.getElementById('emojiOverlay').classList.remove('active');
}

function selectEmoji(emoji) {
  document.getElementById('toolIcon').value = emoji;
  closeEmojiPicker();
  updatePreview();
}

function openColorHistory() {
  const grid = document.getElementById('colorHistoryGrid');
  grid.innerHTML = '';
  
  if (colorHistory.length === 0) {
    grid.innerHTML = '<div style="text-align: center; color: #808080; padding: 40px; width: 100%;">æš«ç„¡é¡è‰²æ­·å²</div>';
  } else {
    for (let i = 0; i < colorHistory.length; i += 2) {
      const row = document.createElement('div');
      row.className = 'color-history-row';
      
      for (let j = i; j < Math.min(i + 2, colorHistory.length); j++) {
        const color = colorHistory[j];
        const item = document.createElement('div');
        item.className = 'color-history-item';
        item.innerHTML = `<div class="color-history-box" style="background: ${color};"></div>`;
        item.onclick = () => {
          selectedColor = color;
          updateDisplay();
          updatePreview();
          closeColorHistory();
        };
        row.appendChild(item);
      }
      
      grid.appendChild(row);
    }
  }
  
  document.getElementById('historySheet').classList.add('active');
  document.getElementById('historyOverlay').classList.add('active');
}

function closeColorHistory() {
  document.getElementById('historySheet').classList.remove('active');
  document.getElementById('historyOverlay').classList.remove('active');
}

function clearColorHistory() {
  if (confirm('ç¢ºå®šè¦æ¸…é™¤æ‰€æœ‰é¡è‰²æ­·å²å—ï¼Ÿ')) {
    colorHistory = [];
    localStorage.setItem('colorHistory', JSON.stringify(colorHistory));
    openColorHistory();
  }
}

function pasteUrl() {
  navigator.clipboard.readText().then(text => {
    document.getElementById('toolUrl').value = text;
  }).catch(() => alert('ç„¡æ³•è®€å–å‰ªè²¼æ¿'));
}

function clearUrl() {
  document.getElementById('toolUrl').value = '';
}

function generateCode() {
  const name = document.getElementById('toolName').value.trim();
  const desc = document.getElementById('toolDesc').value.trim();
  const url = document.getElementById('toolUrl').value.trim();
  const icon = document.getElementById('toolIcon').value.trim();
  const color = selectedColor;

  if (!name || !desc || !url || !icon) {
    alert('è«‹å¡«å…¥æ‰€æœ‰æ¬„ä½');
    return;
  }

  if (!url.startsWith('http')) {
    alert('URL å¿…é ˆä»¥ http:// æˆ– https:// é–‹é ­');
    return;
  }

  const jsCode = `{
  id: 'tool_${Date.now()}',
  title: '${name}',
  description: '${desc}',
  icon: '${icon}',
  color: '${color}',
  url: '${url}'
}`;

  showPreview(name, desc, icon, color);
  document.getElementById('generatedCode').textContent = jsCode;
  document.getElementById('codeSection').classList.add('show');
}

function updatePreview() {
  const name = document.getElementById('toolName').value.trim();
  const desc = document.getElementById('toolDesc').value.trim();
  const icon = document.getElementById('toolIcon').value.trim();
  const color = selectedColor;

  if (!name || !desc || !icon) return;
  showPreview(name, desc, icon, color);
}

function showPreview(name, desc, icon, color) {
  const gradientColor = adjustColor(color, -20);
  const html = `
    <div class="preview-icon" style="background: linear-gradient(135deg, ${color} 0%, ${gradientColor} 100%);">${icon}</div>
    <div class="preview-text"><h4>${name}</h4><p>${desc}</p></div>
  `;
  document.getElementById('previewCard').innerHTML = html;
  document.getElementById('previewSection').classList.add('show');
}

function copyCode() {
  const code = document.getElementById('generatedCode').textContent;
  navigator.clipboard.writeText(code).then(() => {
    const feedback = document.getElementById('feedback');
    feedback.classList.add('show');
    setTimeout(() => feedback.classList.remove('show'), 2000);
  });
}

function clearForm() {
  document.getElementById('toolName').value = '';
  document.getElementById('toolDesc').value = '';
  document.getElementById('toolUrl').value = '';
  document.getElementById('toolIcon').value = '';
  document.getElementById('codeSection').classList.remove('show');
  document.getElementById('previewSection').classList.remove('show');
  selectedColor = '#FF8A80';
  updateDisplay();
}

function adjustColor(color, amount) {
  const col = parseInt(color.slice(1), 16);
  const r = Math.max(0, Math.min(255, (col >> 16) + amount));
  const g = Math.max(0, Math.min(255, ((col >> 8) & 0xFF) + amount));
  const b = Math.max(0, Math.min(255, (col & 0xFF) + amount));
  return '#' + ((r << 16) | (g << 8) | b).toString(16).padStart(6, '0');
}

document.getElementById('toolName').addEventListener('input', updatePreview);
document.getElementById('toolDesc').addEventListener('input', updatePreview);
document.getElementById('toolIcon').addEventListener('input', updatePreview);
document.getElementById('colorCode').addEventListener('change', handleColorInput);
document.getElementById('colorCode').addEventListener('input', handleColorInput);

window.addEventListener('DOMContentLoaded', initColorGrid);
</script>
</body>
</html>